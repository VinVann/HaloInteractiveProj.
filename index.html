<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=2.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h1>
        Halo: Restitution
    </h1>
    <p>
        An unoffcial sequel to the Halo series, created by Kyle Raymondo and Tabor Sands
    </p>

<div id="story">

</div>
<div>
    <div id = "buttons">
</div>
<script>
   const story = {
    start : {
        text : "Jet wakes up in his country home, surrounded by fields of wheat and dirt roads. He looks around his room and is delighted by the sunlight creeping into his room",
        choices : [
            ["section5","Check outside"],
            ["section8","Make breakfast"],
            ["section12","Go back to sleep"]
        ]
    },
    section5 : {
        text : "Jet notices a flood spore and locks the doors and windows",
        choices : [
            ["section15","Find the garage door"],
            ["section15","Double check the doors and windows to make sure they are locked"]
        ]
    },
    section8 : {
        text : "Single flood spore makes it into home due to time wasted, Jet injured trying to escape; spore killed",
        choices : [
            ["section15","Finds something to patch himself up"],
            ["section19","Holds his wound"],
            ["section22","Stay on the ground in pain"]
        ]
    },
    section12 : {
        text : "Jet is overrun by unseen flood spores, manages to escape, but no access to armor or transportation",
        choices : [
            ["section24","Find somewhere to hide"],
            ["section26","Run outside "]
        ]
    },
    section15 : {
        text : "He finds the garage door after searching for it, but it's locked by a 3-digit padlock. Jet needs to enter a code",
        choices : [
            ["section27","Enter '117'"],
            ["section30","Enter '255'"],
            ["section30","Enter '343'"]
        ]
    },
    section19 : {
        text : "He rips his shirt to make a tourniquet to stop the bleeding",
        choices : [
            ["section38","Call for help on your handheld radio"],
            ["section31","Fight back"]
        ]
    },
    section22 : {
        text : "Jet gets up slowly",
        choices : [
            ["section23","Try to heal wounds"]
        ]
    },
    section24 : {
        text : "He hides in his room and locks the door...\n\nJet calls for an airlift from his house to the city...",
        choices : [
            ["section38","Wait"]
        ]
    },
    section26 : {
        text : "Unaware of the approaching spore mob, Jet gets overrun, killed, and transformed into a lifeless, zombie-like organism\n\nYou have found ending number one, The Tragic Ending. \n\nRefresh browser to restart"
    },
    section23 : {
        text : "Jet faints, and is overrun and killed in his state of unconciousness" 
    }, 
    section27 : {
        text : "CORRECT CODE: Jet enters the garage, closes the door and is safe from the flood",
        choices : [
            ["section34", "Check for armor"],
            ["section37", "Explore under large gray tarp"]
        ]
    },
    section30 : {
        text : "INCORRECT CODE: Entering wrong code lead to horde overtaking Jet, killing him instantly"
    },
    section31 : {
        text : "Overwhelmed by sheer number of spores, Jet is knocked to the gound and is rendered unconscious, which then leaves him vulnerable to attacks, and is killed by the horde\n\nYou have found ending number one, The Scrappy Warrior Ending.\n\nRefresh browser to restart"
    },
    section34 : {
        text : ["He finds a large metal container, and opens it to find a set of advanced Mark V Mjolnir armor, right next to a large item under a tarp"],
        choices :[
            ["section37","Check under the tarp"]
        ]
    },
    section37 : {
        text : ["Jet finds a large Jeep-like vehicle with a full tank of gas and he drives it out of the garage, destroying all flood spores in the way, and safely arrives in the city"]
    },
    section38 : {
        text : ["Jet's cry for help is heard, and in around 25 idle minutes, he is airlifted safely to the main city"]
    },
    section39 : {
        text : ["Jet arrives in the city and with a breath of relief, he gets off the vehicle and touches ground again after a long ride to the metropolis, far from his home, which is now being taken over by the rampant species known as the flood.\n\n'New here?' a large man in a technologically advanced suit exclaimed.\n\n'Yeah... I just got med-evaced from my hous- wait! Are you Sergeant Johnson? You worked with my dad a few years back on installation 04!'\n\nJohnson stops for a second\n\n'Jet? Is that really you? My God you've grown into a fine young man. Boy am I glad we rescued you from that invasion, then, you are a valued member of the UNSC!'\n\nJet listened in awe as the Sergeant went on and on about the team and his father's achievements.\n\nSuddenly, as Jet was listening to this grand story, he overhears a few spartans talking about Jet's father returning to the city, after being lost for 4 years...\n\nThe invasion is not gone, however, Jet needs to take initiative and choose wether or not to look for his father after hearing such rumors of his return, or stick with the team and defend against the invaders..."],
        choices : [
            ["section40","Suit up in better armor, grab weapons, and stick with the team"],
            ["section41","Search for father in hopes of finding him over rumors of his return, spread among the spartans."]
        ]
    },
    section40 : {
        text : ["Jet takes a better suit of armor and grabs a Smg silencer and a sword made of glowing hard light energy\n\nHe ponders for a while after grabbing his gear. 'I could either take this chance to be a part of the team, or run alone, giving myself full responsibility for this mission...'"],
        choices : [
            ["section46","Get in the Scorpion model tank with the team of spartans"],
            ["section49","Take Mongoose ATV, alone..."]
        ]
    },




}; 
    let storyContainer = document.getElementById("story");
    storyContainer.innerHTML = "In the far future, on a planet called Reach...";
    let buttonContainer = document.createElement("buttons");
    for(let i = 0; i < 3; i++){
        buttonContainer.innerHTML = story.start.text;
        document.body.appendChild(buttonContainer);
    }
    let storage = ["start"];

let C1 = "Check outside",
    C2 = "Make breakfast",
    C3 = "Go back to sleep",
    C4 = "Find the garage door",
    C5 = "Double check the doors and windows to make sure they are locked",
    C6 = "Find something to patch up the wound",
    C7 = "Hold the wound",
    C8 = "Stay on the ground in pain",
    C9 = "Find somewhere to hide",
    C10 = "Run outside",
    C11 = "Enter '117'",
    C12 = "Enter '255'",
    C13 = "Enter '343'",
    C14 = "Call for help with the handheld radio",
    C15 = "Fight back",
    C16 = "Check for armor",
    C17 = "Explore under large gray tarp",
    C18 = "Suit up in better armor and grab weapons",
    C19 = "Decide to search for father, John",
    C20 = "Join spartan team in the tank",
    C21 = "Take Mongoose ATV, alone",
    C22 = "Tell team you are leaving",
    C23 = "Don't tell team you are leaving",
    C24 = "Hold your ground, fight back",
    C25 = "Run away",
    C26 = "Keep driving",
    C27 = "Stop and fight the horde",
    C28 = "Run with Buck around the horde",
    C29 = "Fight the horde head on with Buck",
    C30 = "Search for survivors"
    C31 = "Mourn the dead",
    C32 = "Rejoin team",
    C33 = "Go home alone"                     
    


function makeButton(btnText, choice){
    let button = document.createElement("button");

    button.innerHTML = btnText;

    buttonContainer.appendChild(button);

    button.addEventListener("click", function(){
        storage.push(choice);
        printStory();
    });
}

function printStory(text) {
    let pageNow = storage[storage.length - 1];
    storyContainer.innerHTML = "";
    buttonContainer.innerHTML = "";
    for(let page of storage){
        createStory(story[page].text);
    }
    for (let choice of story[pageNow].choices){
    makeButton(choice[1], choice[0])
    }
}
function createStory(text){
    let storyItem = document.createElement("p");

    storyItem.innerText = text;

    storyContainer.appendChild(storyItem);
}

printStory(story.start.text);


</script>

</body>
</html>